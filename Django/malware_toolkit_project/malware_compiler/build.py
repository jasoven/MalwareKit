import MalwareFeatures
import CodeManager

# main function
# returns 0 upon successful build, -1 on failure
def main(features):
    codeManager = CodeManager.CodeManager()
    malwareFeatures = []
    for feat in features:
        featObj = codeManager.create_feature_object(feat)
        malwareFeatures.append(featObj)
    # feature = MalwareFeatures.HelloFeature()

    # this could probably just happen within the for loop above
    for feature in malwareFeatures:
        codeManager.add_malware_feature(feature)

    builtSample = 'newSample.exe'
    newSample = 'newSample.cpp'

    res = codeManager.build_executable(builtSample, newSample)
    return res

if __name__ == "__main__":
    main()
